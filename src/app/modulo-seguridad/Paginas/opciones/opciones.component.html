<p-toast></p-toast>
<!--Modal para ingresar padre opción-->
<p-dialog [(visible)]="modalPadreOp" header="{{tituloModal}}" [modal]="true" styleClass="p-fluid" position="top" [style]="{width: '50vw'}">
  <ng-template pTemplate="content">
    <div class="form-group row m-1">
      <label for="name" class="col-sm-2 col-form-label">Nombre:</label>
      <div class="col-sm-10">
        <input type="text" pInputText class="form-control" required name="txtNombre" [(ngModel)]="txtNombre" placeholder="Nombres">
      </div>
    </div>
    <div class="form-group row m-1">
      <label for="name" class="col-sm-2 col-form-label">Icono:</label>
      <div class="col-sm-10">
        <input type="text" pInputText class="form-control" required name="txtIcono" [(ngModel)]="txtIcono" placeholder="Ejemplo: <i class='pi pi-check'></i> se ingresa solo pi pi-check">
      </div>
      <label class="col-12 mt-1 informativo">Para ingresar el icono puede guiarse en <a href="https://www.primefaces.org/primeng/showcase/#/icons" target="_blank">Iconos PrimeNG</a> o en <a href="https://fontawesome.com/v5.15/icons?d=gallery&p=2&m=free" target="_blank">Iconos Fontawesome</a></label>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
      <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialogPO()"></button>
      <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text" (click)="guardarPadreOpcion()"></button>
  </ng-template>
</p-dialog>
<!--Modal para ingresar opción-->
<p-dialog [(visible)]="modalOpcion" header="{{tituloModal}}" [modal]="true" styleClass="p-fluid" position="top" [style]="{width: '50vw'}">
    <ng-template pTemplate="content">
      <div class="form-group row m-1">
        <label for="name" class="col-sm-2 col-form-label">Nombre:</label>
        <div class="col-sm-10">
          <input type="text" pInputText class="form-control" required name="txtNombre" [(ngModel)]="txtNombre" placeholder="Nombre">
        </div>
      </div>
      <div class="form-group row m-1">
        <label for="name" class="col-sm-2 col-form-label">Descripción:</label>
        <div class="col-sm-10">
          <textarea name="txtDescripcion" class="form-control" required rows="3" [(ngModel)]="txtDescripcion" placeholder="Descripción"></textarea>
        </div>
      </div>
      <div class="form-group row m-1">
        <label for="name" class="col-sm-2 col-form-label">Url:</label>
        <div class="col-sm-10">
            <input type="text" pInputText class="form-control" required name="txtUrl" [(ngModel)]="txtUrl" placeholder="Url">
        </div>
      </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialogOP()"></button>
        <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text" (click)="guardarOpcion()"></button>
    </ng-template>
  </p-dialog>
<!--Modal para modificar padre opción-->
<p-dialog [(visible)]="modalPadreOpM" header="{{tituloModal}}" [modal]="true" styleClass="p-fluid" position="top" [style]="{width: '50vw'}">
  <ng-template pTemplate="content">
    <div class="form-group row m-1">
      <label for="name" class="col-sm-2 col-form-label">Código:</label>
      <div class="col-sm-10">
        <input type="text" readonly pInputText class="form-control" required name="txtCodigo" [(ngModel)]="txtCodigo" placeholder="Codigo">
      </div>
    </div>
    <div class="form-group row m-1">
      <label for="name" class="col-sm-2 col-form-label">Nombre:</label>
      <div class="col-sm-10">
        <input type="text" pInputText class="form-control" required name="txtNombre" [(ngModel)]="txtNombre" placeholder="Nombre">
      </div>
    </div>
    <div class="form-group row m-1">
      <label for="name" class="col-sm-2 col-form-label">Icono:</label>
      <div class="col-sm-10">
        <input type="text" pInputText class="form-control" required name="txtIcono" [(ngModel)]="txtIcono" placeholder="Ejemplo: <i class='pi pi-check'></i> se ingresa solo pi pi-check">
      </div>
      <label class="col-12 mt-1 mb-1 informativo">Para ingresar el icono puede guiarse en <a href="https://www.primefaces.org/primeng/showcase/#/icons" target="_blank">Iconos PrimeNG</a> o en <a href="https://fontawesome.com/v5.15/icons?d=gallery&p=2&m=free" target="_blank">Iconos Fontawesome</a></label>
    </div>
    <div class="form-group row m-1">
      <label for="txtEstado" class="col-sm-2 col-form-label">Estado:</label>
      <div class="col-sm-10">
        <select name="sltEstado" id="sltEstado" class="form-control" [(ngModel)]="txtEstado">
          <option [ngValue]='1'>Activo</option>
          <option [ngValue]='0'>Inactivo</option>
        </select>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
      <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialogPOM()"></button>
      <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text" (click)="guardarPadreOM()"></button>
  </ng-template>
</p-dialog>
<!--Modal para modificar opción-->
<p-dialog [(visible)]="modalOpcionM" header="{{tituloModal}}" [modal]="true" styleClass="p-fluid" position="top" [style]="{width: '50vw'}">
    <ng-template pTemplate="content">
      <div class="form-group row m-1">
        <label for="name" class="col-sm-2 col-form-label">Código:</label>
        <div class="col-sm-10">
          <input type="text" readonly pInputText class="form-control" required name="txtCodigo" [(ngModel)]="txtCodigo" placeholder="Codigo">
        </div>
      </div>
      <div class="form-group row m-1">
        <label for="name" class="col-sm-2 col-form-label">Nombre:</label>
        <div class="col-sm-10">
          <input type="text" pInputText class="form-control" required name="txtNombre" [(ngModel)]="txtNombre" placeholder="Nombre">
        </div>
      </div>
      <div class="form-group row m-1">
        <label for="name" class="col-sm-2 col-form-label">Descripción:</label>
        <div class="col-sm-10">
          <textarea name="txtDescripcion" class="form-control" required rows="3" [(ngModel)]="txtDescripcion" placeholder="Descripción"></textarea>
        </div>
      </div>
      <div class="form-group row m-1">
        <label for="name" class="col-sm-2 col-form-label">Url:</label>
        <div class="col-sm-10">
          <input type="text" pInputText class="form-control" required name="txtUrl" [(ngModel)]="txtUrl" placeholder="Url">
        </div>
      </div>
      <div class="form-group row m-1">
        <label for="txtEstado" class="col-sm-2 col-form-label">Estado:</label>
        <div class="col-sm-10">
          <select name="sltEstado" id="sltEstado" class="form-control" [(ngModel)]="txtEstado">
            <option [ngValue]='1'>Activo</option>
            <option [ngValue]='0'>Inactivo</option>
          </select>
        </div>
      </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialogOPM()"></button>
        <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text" (click)="guardarOpcionM()"></button>
    </ng-template>
  </p-dialog>

<p-breadcrumb [model]="items" [home]="home"></p-breadcrumb>
<div class="navegacion">
  <h2 class="navegacion__titulo">Opciones para menú</h2>
  <em>Asignación de encabezado y menú</em>
</div>
<p-tabView styleClass="tabview-custom">
<p-tabPanel>
  <ng-template pTemplate = "header">
    <span>Encabezado de Opciones</span>
</ng-template>
<div>
  <span class="buscar-crear">
    <button pButton pRipple label="Crear Encabezado de Opción" icon="pi pi-plus" class="p-mr-2" (click)="openNewPO()"></button>
      <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')" placeholder="Buscar" />
  </span>
</div>
<div class="widget-header mt-3"><h3>Listado de Encabezado de Opciones</h3></div>
<p-table #dt [value]="listaPadreOpcion" dataKey="id" [rowHover]="true" scrollHeight="500px"
[rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="loading" styleClass="p-datatable-gridlines p-datatable-sm"
[paginator]="true" currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} entradas" [filterDelay]="0"
[globalFilterFields]="['pop_codigo','pop_nombre','pop_icono','pop_estado_nombre']" responsiveLayout="scroll">
<ng-template pTemplate="header">
    <tr>
        <th pSortableColumn="pop_codigo" style="width: 8rem" class="text-center">
          <div class="p-d-flex p-jc-between p-ai-center">
            Código
            <p-sortIcon field="pop_codigo"></p-sortIcon>
        </div>
        </th>
        <th pSortableColumn="pop_nombre">
          <div class="p-d-flex p-jc-between p-ai-center">
              Nombre
              <p-sortIcon field="pop_nombre"></p-sortIcon>
              <p-columnFilter type="text" field="pop_nombre" display="menu" class="p-ml-auto"></p-columnFilter>
          </div>
        </th>
        <th pSortableColumn="pop_icono" class="text-center">
          <div class="p-d-flex p-jc-between p-ai-center">
              Icono
              <p-sortIcon field="pop_icono"></p-sortIcon>
              <p-columnFilter type="text" field="pop_icono" display="menu" class="p-ml-auto"></p-columnFilter>
          </div>
        </th>
        <th class="text-center">
            <div class="p-d-flex p-jc-between p-ai-center">
                Estado
                <p-columnFilter field="pop_estado" matchMode="equals" display="menu">
                  <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                      <p-dropdown [ngModel]="value" [options]="statuses" (onChange)="filter($event.value)" placeholder="Any">
                          <ng-template let-option pTemplate="item">
                              <span [class]="'customer-badge status-' + option.value">{{option.label}}</span>
                          </ng-template>
                      </p-dropdown>
                  </ng-template>
              </p-columnFilter>
            </div>
        </th>
        <th style="width: 8rem" class="text-center">
            <div class="p-d-flex p-jc-between p-ai-center">
                Acción
            </div>
        </th>
    </tr>
</ng-template>
<ng-template pTemplate="body" let-customer>
    <tr>
        <td class="text-center">
            {{customer.pop_codigo}}
        </td>
        <td>
            {{customer.pop_nombre}}
        </td>
        <td class="text-center">
          <i class="{{customer.pop_icono}}"></i>
      </td>
        <td class="text-center">
          <span [class]="'customer-badge status-' + customer.pop_estado">{{customer.pop_estado_nombre}}</span>
        </td>
        <td class="text-center">
            <button pButton pRipple icon="pi pi-pencil" class="p-button p-mr-2" (click)="modificarPadreOp(customer)"></button>
        </td>
    </tr>
</ng-template>
<ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="7">No se encontrarón registros.</td>
    </tr>
</ng-template>
</p-table>
</p-tabPanel>
<p-tabPanel header="Header II">
    <ng-template pTemplate = "header">
      <span>Opciones</span>
  </ng-template>
  <div>
    <span class="buscar-crear">
      <button pButton pRipple label="Crear Opción" icon="pi pi-plus" class="p-mr-2" (click)="openNewOP()"></button>
        <input pInputText type="text" (input)="dt2.filterGlobal($any($event.target).value, 'contains')" placeholder="Buscar" />
    </span>
  </div>
  <div class="widget-header mt-3"><h3>Listado de Opciones</h3></div>
  <p-table #dt2 [value]="listaOpcion" dataKey="id" [rowHover]="true" scrollHeight="500px"
  [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="loading" styleClass="p-datatable-gridlines p-datatable-sm"
  [paginator]="true" currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} entradas" [filterDelay]="0"
  [globalFilterFields]="['opc_codigo','opc_nombre','opc_descripcion','opc_url','opc_estado_nombre']" responsiveLayout="scroll">
  <ng-template pTemplate="header">
      <tr>
          <th pSortableColumn="opc_codigo" style="width: 8rem" class="text-center">
            <div class="p-d-flex p-jc-between p-ai-center">
              Código
              <p-sortIcon field="opc_codigo"></p-sortIcon>
          </div>
          </th>
          <th pSortableColumn="opc_nombre">
            <div class="p-d-flex p-jc-between p-ai-center">
                Nombre
                <p-sortIcon field="opc_nombre"></p-sortIcon>
                <p-columnFilter type="text" field="opc_nombre" display="menu" class="p-ml-auto"></p-columnFilter>
            </div>
          </th>
          <th pSortableColumn="opc_descripcion" class="text-center">
            <div class="p-d-flex p-jc-between p-ai-center">
                Descripción
                <p-sortIcon field="opc_descripcion"></p-sortIcon>
                <p-columnFilter type="text" field="opc_descripcion" display="menu" class="p-ml-auto"></p-columnFilter>
            </div>
          </th>
          <th pSortableColumn="opc_url" class="text-center">
            <div class="p-d-flex p-jc-between p-ai-center">
                URL
                <p-sortIcon field="opc_url"></p-sortIcon>
                <p-columnFilter type="text" field="opc_url" display="menu" class="p-ml-auto"></p-columnFilter>
            </div>
          </th>
          <th class="text-center">
              <div class="p-d-flex p-jc-between p-ai-center">
                  Estado
                  <p-columnFilter field="opc_estado" matchMode="equals" display="menu">
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                        <p-dropdown [ngModel]="value" [options]="statuses" (onChange)="filter($event.value)" placeholder="Any">
                            <ng-template let-option pTemplate="item">
                                <span [class]="'customer-badge status-' + option.value">{{option.label}}</span>
                            </ng-template>
                        </p-dropdown>
                    </ng-template>
                </p-columnFilter>
              </div>
          </th>
          <th style="width: 8rem" class="text-center">
              <div class="p-d-flex p-jc-between p-ai-center">
                  Acción
              </div>
          </th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-opcion>
      <tr>
          <td class="text-center">
              {{opcion.opc_codigo}}
          </td>
          <td>
              {{opcion.opc_nombre}}
          </td>
          <td>
            {{opcion.opc_descripcion}}
          </td>
          <td class="text-center">
            {{opcion.opc_url}}
          </td>
          <td class="text-center">
            <span [class]="'customer-badge status-' + opcion.opc_estado">{{opcion.opc_estado_nombre}}</span>
          </td>
          <td class="text-center">
              <button pButton pRipple icon="pi pi-pencil" class="p-button p-mr-2" (click)="modificarOpcion(opcion)"></button>
          </td>
      </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7">No se encontrarón registros.</td>
      </tr>
  </ng-template>
  </p-table>
  </p-tabPanel>